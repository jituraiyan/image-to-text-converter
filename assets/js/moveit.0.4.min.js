function Moveit(t,e){this.el=t,this.length=this.getLength(),this.setupPath(e)}Moveit.prototype.getLength=function(){if(this.el.nodeName){var t=this.el.nodeName.toLowerCase();if("path"===t)l=this.el.getTotalLength();else if("polygon"===t){var e=this.el.getAttribute("points");e=e.split(" ");for(var i,r,s=null,n=null,l=0,a=0;a<e.length;a++){var o=e[a].split(",");null==s&&null==n?(/(\r\n|\n|\r)/gm.test(o[0])&&(o[0]=o[0].replace(/(\r\n|\n|\r)/gm,""),o[0]=o[0].replace(/\s+/g,"")),/(\r\n|\n|\r)/gm.test(o[1])&&(o[0]=o[1].replace(/(\r\n|\n|\r)/gm,""),o[0]=o[1].replace(/\s+/g,"")),s=o[0],n=o[1],i=o[0],r=o[1]):""!=o[0]&&""!=o[1]&&(/(\r\n|\n|\r)/gm.test(o[0])&&(o[0]=o[0].replace(/(\r\n|\n|\r)/gm,""),o[0]=o[0].replace(/\s+/g,"")),/(\r\n|\n|\r)/gm.test(o[1])&&(o[0]=o[1].replace(/(\r\n|\n|\r)/gm,""),o[0]=o[1].replace(/\s+/g,"")),h=o[0],g=o[1],l+=Math.sqrt(Math.pow(h-s,2)+Math.pow(g-n,2)),s=h,n=g,a==e.length-2&&(l+=Math.sqrt(Math.pow(i-s,2)+Math.pow(r-n,2))))}}else if("circle"===t)l=2*Math.PI*parseFloat(this.el.getAttribute("r"));else if("rect"===t)l=2*this.el.getAttribute("width")+2*this.el.getAttribute("height");else if("line"===t){s=this.el.getAttribute("x1");var h=this.el.getAttribute("x2"),g=(n=this.el.getAttribute("y1"),this.el.getAttribute("y2"));l=Math.sqrt(Math.pow(h-s,2)+Math.pow(g-n,2))}return l}},Moveit.prototype.clear=function(){this.el.style.transition=this.el.style.WebkitTransition="none"},Moveit.prototype.set=function(t){if(this.clear(),"undefined"===t.duration)this.setupPath(t);else{var e=t.timing?t.timing:"linear";this.el.style.transition=this.el.style.WebkitTransition="stroke-dashoffset "+t.duration+"s "+e+", stroke-dasharray "+t.duration+"s "+e;var i=t.delay?t.delay:0,r=this;this.el.addEventListener("transitionend",function(e){(t.callback||t.follow)&&("stroke-dashoffset"!==e.propertyName&&"stroke-dasharray"!==e.propertyName||(t.follow&&(r.el.style.transition=r.el.style.WebkitTransition="none",r.setupPath({start:-(100-r.getValue(t.start)),end:r.getValue(t.end)-100}),delete t.follow),t.callback&&"function"==typeof t.callback&&setTimeout(function(){"function"==typeof t.callback&&(t.callback(),delete t.callback)}),t.callback))}),setTimeout(function(){r.setupPath(t)},1e3*i)}},Moveit.prototype.getValue=function(t){return-1===t.toString().indexOf("%")?t:parseFloat(t.substring(0,t.indexOf("%")))},Moveit.prototype.getPercentage=function(t){return t/100*this.length},Moveit.prototype.setupPath=function(t){var e=this.getValue(t.start),i=this.getValue(t.end),r=i-e,s=100-(i-e),n=100-e;t.color&&(this.el.style.stroke=t.color),this.el.style.strokeDasharray=this.getPercentage(r)+" "+this.getPercentage(s),this.el.style.strokeDashoffset=this.getPercentage(n)};
